# Library Application - å‰ç«¯ç™»å½•åŠŸèƒ½

## ğŸš€ å·²å®ç°çš„åŠŸèƒ½

### è®¤è¯ç³»ç»Ÿ
- âœ… ç”¨æˆ·ç™»å½•ç•Œé¢
- âœ… JWT token ç®¡ç†
- âœ… æœ¬åœ°å­˜å‚¨ token
- âœ… è‡ªåŠ¨è®¤è¯çŠ¶æ€æ£€æŸ¥
- âœ… ç™»å‡ºåŠŸèƒ½

### çŠ¶æ€ç®¡ç†
- âœ… æœªç™»å½•çŠ¶æ€ï¼šæ˜¾ç¤º authors, books, login æŒ‰é’®
- âœ… å·²ç™»å½•çŠ¶æ€ï¼šæ˜¾ç¤º authors, books, add book, logout æŒ‰é’®
- âœ… æ ¹æ®ç™»å½•çŠ¶æ€åŠ¨æ€æ˜¾ç¤ºUI

### å—ä¿æŠ¤çš„åŠŸèƒ½
- âœ… æ·»åŠ ä¹¦ç±ï¼ˆéœ€è¦ç™»å½•ï¼‰
- âœ… ç¼–è¾‘ä½œè€…ä¿¡æ¯ï¼ˆéœ€è¦ç™»å½•ï¼‰
- âœ… è‡ªåŠ¨å¤„ç†è®¤è¯é”™è¯¯

### Apollo Client é…ç½®
- âœ… è‡ªåŠ¨åœ¨è¯·æ±‚ä¸­æ·»åŠ  Authorization header
- âœ… ä» localStorage è¯»å– token
- âœ… è¿æ¥åˆ°æ­£ç¡®çš„åç«¯ç«¯ç‚¹ (localhost:4567)

## ğŸ”§ æŠ€æœ¯å®ç°

### 1. Apollo Client è®¤è¯é…ç½® (main.jsx)
```javascript
const authLink = setContext((_, { headers }) => {
  const token = localStorage.getItem('library-user-token')
  return {
    headers: {
      ...headers,
      authorization: token ? `Bearer ${token}` : null,
    }
  }
})
```

### 2. ç™»å½•ç»„ä»¶ (LoginForm.jsx)
- å¤„ç†ç”¨æˆ·å‡­æ®
- å‘é€ç™»å½• mutation
- ä¿å­˜ JWT token åˆ° localStorage
- é”™è¯¯å¤„ç†

### 3. çŠ¶æ€ç®¡ç† (App.jsx)
- ç®¡ç†ç™»å½•çŠ¶æ€
- åŠ¨æ€å¯¼èˆªèœå•
- æŒä¹…åŒ–ç™»å½•çŠ¶æ€

### 4. é”™è¯¯å¤„ç†
- ç½‘ç»œé”™è¯¯å‹å¥½æç¤º
- è®¤è¯å¤±è´¥å¤„ç†
- è¡¨å•éªŒè¯

## ğŸ” è®¤è¯æµç¨‹

1. **åˆå§‹çŠ¶æ€æ£€æŸ¥**ï¼šåº”ç”¨å¯åŠ¨æ—¶ä» localStorage æ£€æŸ¥æ˜¯å¦æœ‰ä¿å­˜çš„ token
2. **ç™»å½•è¿‡ç¨‹**ï¼šç”¨æˆ·è¾“å…¥å‡­æ® â†’ å‘é€ç™»å½•è¯·æ±‚ â†’ ä¿å­˜è¿”å›çš„ token
3. **è‡ªåŠ¨è®¤è¯**ï¼šæ‰€æœ‰ GraphQL è¯·æ±‚è‡ªåŠ¨åŒ…å« Authorization header
4. **ç™»å‡ºè¿‡ç¨‹**ï¼šæ¸…é™¤ localStorage å’Œå†…å­˜ä¸­çš„ token

## ğŸ® ä½¿ç”¨æŒ‡å—

### å¯åŠ¨åº”ç”¨
```bash
# å¯åŠ¨åç«¯
cd library-backend
PORT=4567 npm run dev

# å¯åŠ¨å‰ç«¯
cd library-frontend
npm run dev
```

### è®¿é—®åœ°å€
- å‰ç«¯ï¼šhttp://localhost:5174
- åç«¯ï¼šhttp://localhost:4567

### æµ‹è¯•è´¦æˆ·
- ç”¨æˆ·åï¼š`testuser`
- å¯†ç ï¼š`defaultpassword`

### æµ‹è¯•æ­¥éª¤
1. è®¿é—®å‰ç«¯åº”ç”¨
2. ç‚¹å‡» "login" æŒ‰é’®
3. è¾“å…¥æµ‹è¯•è´¦æˆ·ä¿¡æ¯
4. ç™»å½•åå¯ä»¥ä½¿ç”¨ "add book" å’Œç¼–è¾‘ä½œè€…åŠŸèƒ½
5. ç‚¹å‡» "logout" é€€å‡º

## ğŸ“± UI ç•Œé¢

### æœªç™»å½•çŠ¶æ€
```
[authors] [books] [login]
```

### å·²ç™»å½•çŠ¶æ€
```
[authors] [books] [add book] [logout]
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **å‰ç«¯**ï¼šReact + Vite + Apollo Client
- **åç«¯**ï¼šApollo Server + GraphQL + MongoDB
- **è®¤è¯**ï¼šJWT tokens
- **çŠ¶æ€ç®¡ç†**ï¼šReact useState + localStorage

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ”’ å®‰å…¨çš„ JWT è®¤è¯
- ğŸ”„ è‡ªåŠ¨ token ç®¡ç†
- ğŸ“± å“åº”å¼ UI çŠ¶æ€
- âš¡ å®æ—¶é”™è¯¯å¤„ç†
- ğŸ’¾ æŒä¹…åŒ–ç™»å½•çŠ¶æ€
- ğŸ¯ åŸºäºè§’è‰²çš„åŠŸèƒ½è®¿é—®

æ‰€æœ‰åŠŸèƒ½éƒ½å·²å®Œæ•´å®ç°å¹¶ç»è¿‡æµ‹è¯•ï¼
